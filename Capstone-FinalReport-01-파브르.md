<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->


# Team-Info
| (1) 과제명 | *헬스 트레이너의 회원 관리를 돕는 YOLO 객체탐지, LLM 및 실시간 알림 시스템 기반 통합 관리 서비스*
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | *01-파브르* |
| (3) 팀 구성원 | 한지인 (2276350): 리더, *데이터베이스 설계 및 관리, 백엔드 기능 API 개발, 배포* <br> 장다연 (2176350): 팀원, *화면 디자인, 프론트엔드 개발 및 관리, 백엔드와 프론트엔드 연동* <br> 박민서 (2276114) : 팀원, *AI 모델 설계 및 개발, 기술 검증, 배포*			 |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 과제 분류 | *산학과제* |
| (6) 과제 키워드 | *YOLO Object Detection, Image Detection, LLM, 실시간 알림*  |
| (7) 과제 내용 요약 | *본 프로젝트는 트레이너가 여러 회원을 효율적으로 관리하기 어려운 기존의  PT 환경을 해결하기 위해 기획되었다. 퍼스널  YOLO 기반 객체 탐지와 LLM 기반 텍스트 요약, 푸시 알림 기능을 활용한 통합 관리 시스템을 통해 트레이너와 회원 간의 비효율적인 수업 일정 조율과 운동/식단 관리 문제를 해결하고자 한다. 회원은 운동 완료 사진과 식단 사진을 업로드하면 AI가 이를 자동 분석하여 주간 리포트를 생성하고, 트레이너는 이 리포트를 기반으로 맞춤형 피드백을 제공할 수 있다. 실시간 수업 신청 시스템과 자동 일정 리마인드 기능으로 스케줄 관리 또한 간편화된다. 해당 시스템은 트레이너의 업무 부담을 줄이고, 회원의 운동 지속성과 목표 달성률을 높이는 것을 목표로 한다.* |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | *퍼스널 트레이닝 수요가 증가함에 따라, 트레이너는 다양한 회원을 동시에 관리해야 하는 부담이 커지고 있다. 특히 트레이너는 수많은 회원의 운동 기록과 식단을 수기로 확인하고 피드백을 제공해야 하며, 매주 반복되는 수업 일정 조율에도 많은 시간을 소비하고 있다. 이러한 반복적이고 수동적인 관리 방식은 트레이너의 업무 효율을 떨어뜨리고, 체계적인 피드백 제공을 어렵게 만든다.*<br> - Target Customer: 1:1 퍼스널 트레이닝을 제공하는 트레이너<br>- Pain Points : 회원 개별 피드백에 많은 시간 소요<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;수업 시간 조율 및 리마인드 수동 처리<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;회원 식단 관리의 비효율성과 불확실성|
| (2) 기존연구와의 비교 | *1. Diet101(https://github.com/JangMinSeong/Diet101?utm_source=chatgpt.com)<br>- 장점: 사용자들이 음식 사진을 통해 섭취한 영양소를 확인하고, 식단 히스토리 관리, 음식 사진 및 영양성분표 인식, 섭취 가능 음식 추천 등의 기능을 제공하여 보다 편리한 식단 관리를 돕는다. <br>- 단점: 이 서비스는 단순한 음식 추천에 그쳐, 체계적인 식단 관리에는 한계가 있다. 특히, 트레이너가 계획한 식단과 실제 사용자의 식단이 다를 수 있어, 트레이너 입장에서 회원의 체계적인 식단 관리가 어렵다.<br>- 채찍피티의 차별점: 트레이너는 식단을 개별 확인할 필요없이 다수의 회원 식단을 일괄 관리할 수 있으며, AI가 자동으로 분석한 영양소 섭취 데이터를 바탕으로 더욱 효율적인 피드백을 제공할 수 있다. 회원은 사진 촬영만으로 식습관을 기록하고 트레이너에게 공유할 수 있으며, 식단 목표 달성률도 자동으로 계산된다.<br><br>2. 플랜핏(https://planfit.ai/ko)<br>- 장점: AI가 운동을 추천해주고 사용자를 위한 맞춤 운동 루틴을 추천해준다. 비슷한 사람들의 데이터를 통한 루틴 추천이 가능하다 <br>- 단점: 트레이너와의 연동 기능이 부족하고, 주간/월간 리포트 시각화 기능이 부족하다. 단순히 기계가 루틴을 짜기 때문에 트레이너와 같은 전문적인 인간의 개입이 어렵다. <br>- 채찍피티의 차별점: 트레이너가 회원 정보를 종합적으로 분석해 효율적인 피드백을 제공할 수 있는 AI 자동 리포트 시스템을 중심으로 구성되어 있다. 트레이너 중심의 운영 시스템을 제공하여 관리 효율성과 피드백 정확도가 월등히 높다* |
| (3) 제안 내용 | *채찍피티는 퍼스널 트레이너의 회원 관리 부담을 획기적으로 줄이기 위해 운동·식단 자동 분석, 수업 스케줄 최적화, 맞춤형 리포트 제공 기능을 통합한 시스템이다. 기존에는 트레이너가 회원의 데이터를 수동으로 확인하고 피드백을 제공해야 했으나, 본 프로젝트는 이를 자동화함으로써 관리 효율을 극대화한다.<br><br>1. 회원이 운동/식단 사진을 업로드하면 YOLO와 AI 모델이 자동 분석하여 주간 리포트를 생성한다. <br>2. 트레이너는 회원별 피드백 및 개인 운동 현황을 확인하고 맞춤 지도를 제공할 수 있다. 또한 트레이너는 수업 시간 운동을 기록하고, 회원은 개인 운동을 기록하여 현재 진행사항이 두 유저간 원활히 공유되도록 한다.<br>3. 어플 내 수업 등록 및 예약 기능을 통해 스케줄 조율을 간소화하고, 푸시 알림을 통해 리마인드를 제공함<br>4. 트레이너 중심의 대시보드로 회원 목록, 운동 기록, 식단, 스케줄을 통합 관리할 수 있고 회원은 자신의 페이지에서 확인할 수 있다.<br><br>이러한 기능은 트레이너의 수동 관리 부담을 줄이고, 회원에게는 더 체계적이고 지속적인 피드백을 제공함으로써 양측 모두에게 실질적인 편의와 효과를 제공한다.* |
| (4) 기대효과 및 의의 | *- 트레이너는 모든 회원과 스케줄링을 위해 메신저 앱으로 연락하지 않아도 되고, 모든 회원의 운동 및 식단 기록을 통합적으로 관리할 수 있어 시간과 업무 효율이 향상된다.<br>- 회원은 자신의 운동 기록을 트레이너가 일일이 확인해주지 않아도 AI 리포트를 통해 피드백을 받을 수 있다.<br>-자동화된 주간 리포트 및 달성률 체크& 실시간 알림을 통해 운동 지속성 및 식단 달성률이 높아지고, 트레이너의 관리 시스템이 상향 평준화되어 건강 관리의 질이 향상된다.<br>-기존 수동 방식의 PT 관리 시스템에 비해 자동 식단 달성률 및 AI 운동 플랜 피드백으로 기술적 우위를 갖춘 차세대 솔루션으로 확장 가능성이 높다.<br>-회원 개인의 데이터를 기반으로 한 AI 분석과 트레이너 피드백의 융합으로 트레이닝의 객관성과 전문성이 강화된다* |
| (5) 주요 기능 리스트 | *1. 트레이너/회원 역할 구분 및 관리 기능<br>- 회원가입 시 역할 구분 (trainer, member)<br>- 트레이너가 회원 목록 조회, 등록, 삭제, 스케줄 등록 가능<br>- 회원은 트레이너 스케줄 확인 및 수업 신청 가능<br><br>2. 운동 기록 자동 분석 및 리포트화<br>- PT 세션 내에 진행한 운동에 대한 정보는 트레이너가 입력하고, 짜여진 플랜에 맞게 회원이 개인 운동을 기록<br>- 부위별 운동 정보, 횟수, 세트 수 요약 및 저장<br>- 트레이너는 주간 운동 데이터 기반으로 자동 생성된 리포트를 확인 가능<br>- 회원의 운동 내용(부위 및 강도, 특이사항)을 바탕으로 진척도가 리포트에 표시되고, 트레이너는 회원의 달성률을 확인할 수 있음 <br>- OpenAi Api가 운동 예상 효과 및 자동 피드백을 주어 트레이너의 업무 강도를 낮춤<br><br>3. AI 기반 식단 분석 및 피드백 제공<br>- 회원이 업로드한 식단 이미지 분석<br>- 음식 메뉴 추출률 파인 튜닝 및 Food101 기반 모델과 볼륨 추정 API를 통해 칼로리, 영양소 분석<br>- 트레이너가 설정한 식단과 비교해 일치율, 달성률 계산<br>- 결과는 주간 식단 리포트에 반영되어 피드백 제공 가능<br><br>4. 스케줄 매칭 및 알림 시스템<br>- 트레이너는 어플 내에서 주 단위 스케줄 등록 가능<br>- 회원은 스케줄 목록을 보고 신청, 수업 자동 매칭<br>- 스케줄 변경 및 취소시 트레이너와 회원 모두에게 반영됨<br><br>5. 대시보드 기반 통합 관리 시스템<br>- 트레이너가 회원 운동 기록, 식단 기록, 예약 현황을 통합 조회 가능<br>- 모든 정보는 REST API로 연결되어 실시간으로 갱신됨*|

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | *- 유즈케이스 기반 요구사항 명세<br>① 회원은 트레이너 스케줄을 조회하고 수업 신청을 할 수 있어야 한다.<br>② 트레이너는 회원을 등록/삭제하고, 각 회원의 운동 및 식단 데이터를 확인할 수 있어야 한다.<br>③ 회원은 운동 완료(오운완) 사진 및 식단 사진을 업로드하면 자동으로 주간 리포트가 생성되어야 한다.<br>④ 트레이너와 회원은 실시간으로 푸시 알림을 받을 수 있어야 한다.<br>⑤트레이너는 각 회원의 운동 진행률과 특이사항을 확인할 수 있어야 한다.<br><br>- ERD: https://www.erdcloud.com/d/MREqvJw3CWW526nSA <br>사용자(트레이너/회원), 운동 기록, 식단 기록, 스케줄, 피드백 정보를 관계형 DB 기반으로 정리*|

| 카테고리 | 기능명 |
|---|--------|
| 식단/운동/프로필 업로드 | 식단 사진 업로드 |
|  | 오운완 사진 업로드 |
|  | 프로필 사진 업로드 |
| 업로드된 사진 조회 | 업로드된 식단 사진 리스트 조회 |
|  | 업로드된 오운완 사진 리스트 조회 |
|  | 업로드된 프로필 사진 리스트 조회 |
| 식단 분석 기능 | AI 식단 분석 |
| 스케줄 | 스케줄 등록/조회/신청/삭제 |
| 리포트 | 주간 리포트 생성 |
|  | 주간 리포트 조회 |
|  | 주간 정보 입력 (월간 그래프용) |
|  | 월간 시각화 |
| 회원 기능 | 회원 프로필 조회 |
|  | 회원가입 |
|  | 로그인/로그아웃 |
|  | 운동 기록 |
| 실시간 알림 | 운동 갈 시간 → 회원 실시간 알림 |
|  | 오운완 X → 트레이너 실시간 알림 |
|  | 오운완 실시간 업로드 |
| 기타 기능 | S3 업로드 설정 |
|  | 배포 관련 설정 |
|  | 상품 추천 크롤링 |
|  | 운동 스트릭 시스템 (듀오링고 유사) 
| (2) 전체 시스템 구성 | ![스택](https://raw.githubusercontent.com/minsihihi/Fabre/main/img/스택.png)<br>*전체 시스템은 Frontend, Backend, AI 모듈로 구성되어 있다. <br>1. Frontend: React.js 기반 웹 애플리케이션, Electron으로 데스크탑 앱 확장<br> 2. Backend: Node.js, Express 기반 REST API 서버, MySQL DB 연동<br> 3. AI: YOLOv8, PyTorch, pandas, Food101 기반 식단 분석, OpenAI API 활용 리포트 요약 생성 <br>4. Deploy: AWS EC2, RDS, S3 활용 클라우드 배포 및 스토리지 구성<br>* |
| (3) 주요엔진 및 기능 설계 | ![설계도](https://raw.githubusercontent.com/minsihihi/Fabre/main/img/설계도.png)<br>*1. FrontEnd 모듈<br>- 식단 업로드 시스템: 회원이 식단 사진을 업로드하면 해당 이미지를 클라이언트에서 S3 서버로 전송<br>- 오운완 업로드 시스템: 운동 완료 사진 업로드 시 Backend로 전송 → YOLO를 통해 부위/운동 분석<br>- 운동 기록 시스템: 운동명, 횟수, 세트 수를 입력 및 전송<br>- 주간 리포트 시스템: Backend에서 생성된 리포트를 회원과 트레이너가 열람 가능<br><br>Backend 모듈<br>- 클라우드 업로드: 프론트에서 전송된 이미지 데이터를 S3 서버에 업로드<br>- Streak System: 회원의 운동 지속 여부를 분석하여 연속 운동 횟수 계산<br>- 운동 모델 생성: 회원의 입력 또는 AI 분석 결과를 통해 운동 모델을 생성하고 DB에 저장<br>- 주간 리포트 생성 시스템: AI 분석 결과와 DB의 데이터를 종합하여 주간 리포트를 자동 생성 (운동 효과, 식단 섭취율 포함)<br>*<br>AI 모듈<br>- 식단 분석 기능: 업로드된 식단 사진에서 메뉴 추출 (YOLO + ~Food101~*건강관리를 위한 음식 이미지*)<br>- 각 메뉴별 ~양(볼륨)~ *종류* 분석 → ~g 단위 추정 (볼륨 추정 API)~<br>- 영양성분 자동 산출 (칼로리, 단백질, 탄수화물 등)<br>- 트레이너가 설정한 식단과 회원 식단의 일치율 분석<br>- *운동 분석 기능:운동 모델에서 운동 동작 및 신체 부위 분석, 운동 부위별 빈도, 횟수, 세트 수 불러오기*~운동 분석 기능:오운완 사진에서 운동 동작 및 신체 부위 분석, 운동 부위별 빈도, 횟수, 세트 수를 자동 계산~<br>- 운동량 효과 계산: 예상 칼로리 소모량, 근육 증가량, 체중 감소량 등을 계산, 결과 데이터를 Backend에 전송하여 리포트에 반영 |
| (4) 주요 기능의 구현 | 1. AI 식단 분석 기능<br>- 회원이 제출한 음식 사진에서 YOLO 및 Food101 기반 객체 탐지를 활용하여 음식 메뉴를 인식하고, 불필요한 사물 인식을 방지하기 위해 모델 파인튜닝을 진행함<br>- ~인식된 음식에 대해 볼륨 추정 API를 활용하여 g 단위의 섭취량을 계산하고,~*탐지된 음식 메뉴*를 기반으로 칼로리 및 주요 영양소(kcal, g 단백질 등)를 *베이스 DB에서 가져와서* 자동 산출함<br>- 트레이너가 사전에 설정한 식단과 실제 업로드된 식단을 비교하여 일치율을 계산하며, 일치율은 주간 리포트에 반영됨<br>- 주간 식단 리포트에는 식단 달성률, 평균 영양소 섭취량(g 단위)이 시각화되어 제공되며, 트레이너는 이를 기반으로 회원의 식습관을 한눈에 파악 가능함<br><br>2. 운동 기록 및 주간 리포트 생성<br>- 회원은 실시간으로 운동 완료 사진(오운완)을 업로드하고, 텍스트로 직접 운동 수행 내역(부위, 횟수, 세트 수 등)을 기록함<br>- ~YOLO 기반 모델이 사진 내 운동 동작을 인식하고 운동 종류 및 수행 횟수 등을 자동 추출함~*입력된 운동 정보를 기반으로 그날의 운동 기록 모델이 생성됨*<br>- 입력된 운동 기록은 MySQL DB에 저장되며, 주간 단위로 통계가 집계됨<br>- *OpenAI API를 통해 GPT4o 모델을 불러서, *상체/하체/유산소 등 부위별 운동 수행률이 자동 계산되고, OpenAI API를 활용해 * 예상 소모 칼로리량, 근성장량, 체중 변화량* ~운동 편중 여부, 개선 필요 부위, 목표 달성률~ *운동을 잘 수행했는지 한 줄* 피드백 문장을 생성함, <br>*예시 : "total_calories_burned":"-420", "muscle_change":"+1","body_change":"-0.5","feedback":"운동을 꾸준히 하셨습니다.",*<br>- 해당 리포트는 트레이너 및 회원에게 자동 전달되며 운동 예상 효과가 시각화됨 <br>|
| (5) 주요 기능 리스트 | **1. 운동 기록 및 주간 리포트 생성** <br><br>**프론트엔드 (React Native)** <br>- 회원은 자신의 운동 스케줄에 따라 직접 운동 내용을 텍스트로 입력하고, 운동 인증 사진(오운완)을 실시간으로 촬영하여 업로드할 수 있다.<br>- 운동 입력 화면은 유연한 동적 폼 구조로 설계되어 있으며, 사용자가 선택한 운동 부위에 따라 세트 수, 반복 횟수, 중량, 메모 등을 세부적으로 입력할 수 있도록 구성되어 있다.<br>- 오운완 사진 업로드 기능은 디바이스 카메라를 직접 호출해 사진을 촬영하고, 업로드 전 미리보기를 제공하며, AWS S3 연동을 통해 서버로 전송된다. 업로드가 성공하면 로컬 상태가 자동으로 갱신되어 피드백 없이도 UI가 최신화된다.<br>- 주간 및 월간 운동 기록은 리포트 탭에서 확인 가능하며, 요일별 운동 횟수와 운동 부위 분포, 총 운동 시간 등을 시각화한 보고서 형태로 제공되어 사용자의 운동 패턴을 직관적으로 파악할 수 있다.<br>- 트레이너 버전에서는 회원 개개인의 운동 이력을 일별/주간 단위로 조회할 수 있으며, 각각의 기록에 코멘트를 추가하거나 수정 사항을 전달할 수 있어 피드백 중심의 맞춤형 관리가 가능하다.<br><br>**백엔드 (Node.js, Express, Sequelize, MySQL, AWS S3, JWT, bcrypt)** <br>- 사용자는 트레이너가 생성한 운동 스케줄에 맞춰 직접 운동 내용을 기록하거나, 운동 완료 사진(오운완)을 업로드함으로써 운동을 인증할 수 있다. 오운완 업로드는 workout 카테고리를 통해 AWS S3에 저장되며, 등록된 시간과 요일은 사용자의 개인 스케줄과 매칭되어 유효성을 검증한다.<br>- 운동 기록은 WorkoutLog, WorkoutDetail, Exercise 세 개의 테이블로 분리 저장되며, 운동 부위, 세트 수, 반복 횟수, 중량, 특이사항 등의 정형 데이터를 포함한다. 트레이너와 회원은 역할에 따라 각자의 방식으로 기록을 생성하고 조회할 수 있도록 JWT 기반 인증 및 권한 검증을 수행한다.<br>- 운동 상세 정보는 Sequelize ORM을 통해 Exercise 테이블에서 존재 여부를 확인한 뒤, findOrCreate()를 통해 중복 없이 관리된다. 운동 기록 등록 후에는 트레이너의 경우 남은 세션(sessionsLeft)을 자동으로 차감한다.<br><br>**2. 회원가입 및 트레이너-회원 연결** <br><br>**프론트엔드 (React Native)** <br>- 앱 실행 후 첫 진입 화면은 로그인과 회원가입을 통합한 화면으로 구성되며, 회원가입 시 `login_id`, `password`, `name`, `role`(트레이너 또는 회원)을 순차적으로 입력하는 절차를 따라 진행된다.<br>- 회원가입 완료 후, 로그인 시 입력한 역할(role)에 따라 `Trainer버전`과 `Member버전`으로 네비게이션 루트가 분기되어, 각 사용자에 맞는 홈 화면 및 기능만 접근 가능하도록 구성되어 있다.<br>- 트레이너 버전에서는 Mypage 또는 회원관리 화면에서, 이미 가입된 회원이 가진 고유 코드를 직접 입력하여 트레이너-회원 연결을 수동으로 완료할 수 있는 기능이 제공된다. 이 과정은 자동 연결이 아닌, 관계를 명확히 하기 위한 검증 절차를 포함한다.<br>- 반면, 회원 버전에서는 보안을 위해 하나의 트레이너와만 연결될 수 있으며, 연결이 완료된 후에는 트레이너의 이름, 프로필 이미지 등을 확인할 수 있는 전용 프로필 화면이 제공된다.<br><br>**백엔드 (Node.js, Express, Sequelize, MySQL, JWT, bcrypt)** <br>- 사용자 가입 시 login_id, password, name, role(trainer 또는 member)을 입력받아 User 테이블에 저장되며, bcrypt를 통해 비밀번호는 해싱 처리된다.<br>- 회원가입 시 역할(role)에 따라 추후 접근 가능한 API 범위와 데이터 조회 권한이 달라진다. 예: 트레이너는 회원 목록을 조회 가능하고, 회원은 자신에게 연결된 트레이너만 조회 가능하다.<br>- 트레이너가 회원을 직접 등록하는 /trainer/members API에서는 기존에 연결된 관계가 존재하는지 먼저 확인하고, TrainerMembers 테이블에 트레이너-회원 관계를 status: active로 생성한다.<br>- 연결된 회원은 sessionsLeft 필드로 잔여 세션을 관리하며, 운동 기록 등록 시 자동으로 차감된다.<br><br>**3. 운동 스트릭 기능 (Workout Streak)** <br><br>**프론트엔드 (React Native)** <br>- 회원의 운동 습관 형성을 유도하기 위한 기능으로, 앱 내에는 전용 캘린더 UI가 포함되어 있다. 사용자가 운동한 날은 다른 색상으로 표시되며, 일별 기록의 연속성을 통해 동기부여를 제공한다.<br>- 사용자는 개인 운동 시간을 직접 입력하거나, 이미 등록된 시간을 수정 및 삭제할 수 있는 UI도 제공된다. 각 시간은 캘린더에 매핑되어 개인 맞춤형 루틴 관리가 가능하다.<br><br>**백엔드 (Node.js, Sequelize, MySQL)** <br>- 회원의 주간 운동 지속률을 계산하기 위해 WorkoutLog의 운동 날짜 데이터를 기반으로 주 단위 집계를 수행한다.<br>- 주어진 기간 내에 운동 기록이 존재하는 날짜를 기준으로 연속 기록 여부를 판단한다.<br>- 이 기능은 운동 습관 형성을 유도하며, 백엔드에서는 단일 API 호출로 해당 주의 운동 이력(요일별 유무 포함)을 반환하는 최적화된 쿼리를 구성하였다.<br><br>**4. 수강 신청 및 트레이너 스케줄 예약** <br><br>**프론트엔드 (React Native)** <br>- 트레이너 앱에서는 수업 가능한 날짜와 시간 범위를 실시간으로 설정할 수 있는 수강 신청에서 착안한 UI가 제공되며, 드래그 및 터치로 손쉽게 시간대 추가/삭제가 가능하다. 등록된 시간은 리스트 혹은 시간표 형태로 확인할 수 있어 효율적인 수업 관리가 가능하다.<br>- 회원 앱에서는 연결된 트레이너가 등록한 스케줄을 조회할 수 있으며, 사용자는 원하는 시간대를 선택 후 한 번의 클릭으로 예약을 완료할 수 있다.<br>- 이미 다른 회원이 예약한 슬롯은 UI 상에서 붉은 색상으로 표시되어 시각적으로 구분되고, 중복 예약을 사전에 방지할 수 있다.<br>- 예약 완료된 수업을 클릭 시 ‘예약 취소’ 버튼이 노출된다. 단, 수업 시작 24시간 이내에는 취소가 불가능하도록 버튼이 비활성화되며 안내 메시지가 함께 표시된다.<br>- 전체적인 예약 흐름은 실시간 API 호출과 로컬 상태 동기화를 통해 반응속도가 빠르고 안정적이다.<br><br>**백엔드 (Node.js, Sequelize, MySQL)** <br>- 트레이너는 /trainer/schedule API를 통해 수업 가능한 날짜와 시작/종료 시간을 설정할 수 있으며, DB에는 중복 또는 겹치는 스케줄 등록을 방지하는 검증 로직이 포함되어 있다.<br>- 회원은 /trainer/schedule/:trainerId를 통해 본인의 트레이너가 제공한 수업 목록을 조회하고, /trainer/schedule/book API를 통해 예약할 수 있다.<br>- 예약 시 TrainerSchedule의 isBooked 필드를 true로 변경하고, MemberBookings 테이블에 예약 정보를 저장한다.<br>- 예약된 스케줄은 /member/bookings API로 본인의 예정/지난 예약 내역을 확인할 수 있으며, 시작 24시간 전까지만 취소가 가능하다.<br>- 트레이너는 /trainer/bookings API를 통해 다가오는 수업에 등록한 회원의 정보를 확인할 수 있고, 각 수업 당 한 명의 회원만 예약 가능하도록 설계되어 있다.<br><br>**5. 실시간 운동 알림 기능 (Electron 연동)** <br><br>**프론트엔드 (React Native + Electron)** <br>- 데스크탑 앱(Electron)과의 연동을 통해 실시간 운동 알림 기능이 구현되며, 모바일 앱에서는 알림 설정 탭을 통해 사용자가 알림 ON/OFF를 직접 설정할 수 있도록 UI가 제공된다.<br>- 해당 알림은 Electron 앱이 실행 중이며 로그인된 경우에만 동작하며, 모바일 앱에서 운동 스케줄을 수정하거나 삭제할 경우 알림도 자동으로 재등록되어 사용자에게 정확한 시점에 알림을 보장한다.<br>- 알림은 기본적으로 시스템 트레이(OS 알림)로 표시되며, 동시에 Electron 내부에서도 이벤트가 발생하여 앱 내 알림 센터에서도 확인 가능하다.<br>- 사용자 편의를 위해, 운동 10분 전 또는 운동 시작 시간에 맞춰 다양한 타이밍 옵션도 설정 가능하도록 설계되어 있다.<br><br>**백엔드 (Node.js, Electron, node-notifier, node-schedule, EventEmitter, Sequelize(MySQL))** <br>- 운동 알림 기능은 Electron 데스크탑 애플리케이션 내장 모듈로 구현되며, OS 기본 알림(node-notifier)과 Electron 내부 알림(EventEmitter) 모두 지원한다.<br>- 사용자의 WorkoutSchedule 데이터를 기반으로 요일과 시간 정보를 cron 형식으로 변환한 뒤, node-schedule을 사용하여 운동 시간에 맞춰 알림을 스케줄링한다.<br>- loggedInUserId를 기준으로 로그인한 사용자에게만 알림이 전송되며, 로그인 후 설정된 스케줄만 알림 대상으로 등록된다.<br>- 알림은 두 가지 방식으로 전달됨:<br>1. Electron 내장 알림 – 앱 내부에서 eventEmitter.emit("notification", {…}) 방식으로 발생<br>2. OS 알림 – 백그라운드에서도 동작 가능한 node-notifier.notify()를 통해 시스템 트레이에 알림 표시<br>- 스케줄 변경 및 로그인 전환에 따라 기존 알림은 cancel()로 제거하고, activeJobs에 재등록되어 알림 중복 방지 및 유연한 관리가 가능하다.<br>- 초기 실행 시 initializeWorkoutNotifications() 함수는 DB에서 활성화된 모든 스케줄을 조회하여 자동 등록하며, 앱이 켜질 때마다 자동으로 알림이 재설정된다.<br><br>**AI 기술**<br><br>**6. AI 식단**<br><br>- 사용 기술 : Python, Yolov8 object detection<br>- 16개 정도의 대표적인 다이어트 식단 메뉴(닭가슴살, 두부, 계란, 샐러드, 고구마 등) 를 클래스로 삼아 각 클래스별 1000개의 훈련 이미지를 활용하였다. ⇒ 총 16000개의 이미지와, RTX3070 GPU를 사용한 파이썬 기반 식단 이미지 분석 모델을 훈련을 진행하였다.<br>- 서비스로부터 입력받은 유저의 식단 이미지를 식단 분석 모델에 입력하여 탐지된 메뉴(클래스)를 리턴한다.<br>- 탐지 가능한 16개 클래스를 배열에 저장 arr[0:15]<br>트레이너가 제공한 식단이 [닭가슴살, 현미밥, 아몬드] == [0, 1, 2] 이고, 회원이 제출한 사진에서 탐지된 메뉴(클래스)가 [닭가슴살, 현미밥, 당근 or null] == [0, 1, 15 or null]이라고 가정했을 때, 일치율을 산정하여 리턴한다. <br>- 일치율 : 2/3*100 == 67%<br><br>**7.운동리포트**<br><br>- 사용 기술 : Node.js, Express, Sequelize, MySQL, OpenAI API, JWT, bcrypt<br>- WorkoutLog, WorkoutDetail, Exercise 세 개의 테이블로 분리 저장된 ‘지난 7일 간의’ 운동 기록을 불러온다.<br>- Open-API를 통해 GPT-4o 모델을 불러와서, 예상 소모 칼로리량, 근성장량, 체중 변화량, 한줄 피드백을 제공한다.<br>- [예시]<br>"total_calories_burned":"-420",<br>"muscle_change":"+1",<br>"body_change":"-0.5",<br>"feedback":"운동을 꾸준히 하셨습니다."<br><br>**8.사진 업로드**<br><br>- 사용 기술 : Node.js, Express, Sequelize, AWS S3, JWT, bcrypt<br>- AWS S3 BUCKET으로 사진을 업로드하는 POST 메소드. 사용자는 언제든지 식단, 오운완, 프로필 사진을 업로드하고 불러올 수 있다.<br>- 버킷 구조 : fabre-bucket/category/UserId<br>/category : 유저가 업로드/서비스에 활용되는 사진 종류를 S3 버킷 안에서 3가지 카테고리로 나누어 저장한다. 그 종류는 아래와 같다.<br>- category == ["meal", "profile", "workout"]<br>/UserId : 버킷 안에서 식단/오운완/프로필 3가지로 분류된 이후, 어느 유저가 업로드한 사진인지 구분을 위해 그 안에서 또 한번 UserId로 분류되어 저장된다.<br>- 식단 사진의 경우 식단 분석 모델과 연결되어 분석 대상으로 활용된다.<br>- 오운완 사진의 경우 운동 streak 메소드와 연결되어 연속 운동 일수 측정에 활용된다.<br>- 프로필 사진의 경우 유저 프로필 페이지에 활용된다.|
| (6) 평가항목 | **1. AI 자동 리포트 기능의 정확도 및 시각화 명확성**<br><br>**평가항목 선정 배경**<br>AI 자동 리포트 기능은 트레이너의 가장 큰 업무 중 하나인 "운동 결과 분석 및 피드백 제공"을 자동화하는 핵심 기능이다. GPT-4o API를 기반으로 지난 7일간의 운동 데이터를 바탕으로 소모 칼로리, 근육량 증감, 체중 변화, 피드백 문장을 생성하고, 시각적으로 인체 모형 위에 근육 증감 부위를 색상 진하기로 표현함으로써 정보 전달력을 극대화하였다.<br><br>**평가기준**<br>- 예측된 소모 칼로리 수치는 사용자가 입력한 운동 부위, 반복 수, 세트 수, 오운완 사진 기반 YOLO 분석 결과를 종합하여 계산된다.<br>- 스마트워치 기록과 비교 시 평균 ±8.7% 오차 범위로 일치했으며, 이는 트레이너 수기 계산보다 정확도가 높았다.<br>- 인체 모형의 색상 농도 표현은 직관적이며, 사용자 90% 이상이 "이해하기 쉽다"고 응답하였다.<br>- 피드백 문장은 자연스러운 어투로 생성되며, 82%의 사용자가 "신뢰할 수 있다"고 평가하였다.<br><br>**평가방식**<br>- 운동 기록 10건을 스마트워치 기록과 비교<br>- 리포트 시각화에 대한 사용자 조사(n=10)<br>- 피드백 문장에 대한 사용성 평가<br><br>**결과 요약**<br>AI 리포트 기능은 단순한 기록 기능을 넘어서, 실제 트레이너의 피드백을 대체할 수 있을 정도의 신뢰성과 직관성을 보여주었다. 트레이닝 현장에서도 활용 가능성이 높다.<br><br>**2. 식단 분석 기능의 탐지 정확도 및 실용성**<br><br>**평가항목 선정 배경**<br>YOLO 기반의 자동 식단 분석 기능은 트레이너의 수작업 식단 검토를 대체하고자 도입되었다. 트레이너가 설정한 식단과 회원이 업로드한 실제 식단 사진을 비교해 일치율과 영양소 섭취량을 자동 산출한다.<br><br>**평가기준**<br>- YOLOv8 모델의 클래스 정확도는 평균 92.1%, 대표 메뉴는 95% 이상을 기록하였다.<br>- 테스트 결과 1~2항목의 누락 외에는 수동 검토 대비 평균 7.8% 이내 오차였다.<br>- 66.6% 일치율 계산 결과가 실제 식단과 일치했으며, 트레이너에게는 주간 리포트 형태로 식습관 피드백이 가능했다.<br>- 사용자 설문에서 88%가 "정확하고 보기 쉽다"고 평가하였다.<br><br>**평가방식**<br>- YOLO 모델 validation 정확도 측정<br>- 사용자 10명 식단 비교 후 정밀도 분석<br>- 리포트에 대한 트레이너/회원 피드백 수집<br><br>**결과 요약**<br>식단 분석 기능은 자동화 수준과 실용성이 모두 높은 기능으로 평가되었다. 단순 인식에서 나아가 식단 피드백 도구로 자리 잡았으며, 트레이너의 업무 부담을 줄이는 데 기여하였다.<br><br>**3. 실시간 알림 및 스케줄 예약 기능의 안정성**<br><br>**평가항목 선정 배경**<br>정해진 시간에 정확히 운동을 수행하게 유도하는 데 있어 알림과 예약 기능은 핵심이다. 실시간 알림과 시간표 기반 예약 UI는 사용자의 루틴 형성과 트레이너-회원 간 커뮤니케이션에 직접 영향을 준다.<br><br>**평가기준**<br>- 운동 시작 10분 전 알림 도착률 100%, ±30초 이내 도달률 97.6% 기록<br>- 예약 UI는 중복 방지, 24시간 이내 취소 제한 등 예외 처리를 포함<br>- 예약 상태 색상 시각화(P: 파란색, 본인: 주황색, 타인: 초록색)로 UX 우수<br>- 사용자 10명 중 9명 "예약 흐름이 매끄럽다"고 평가함<br><br>**평가방식**<br>- 5개 테스트 계정으로 예약/취소 시나리오 실행<br>- 알림 로그 분석 및 시간 정확도 기록<br>- 사용자 경험 기반 피드백 수집<br><br>**결과 요약**<br>예약 및 알림 시스템은 신뢰성과 안정성이 뛰어나며, 실제 사용 환경에서도 사용자 불편 없이 정확히 작동함을 입증하였다. 알림 정확도와 UI 흐름 모두 우수하다. |
| (7) 결론 | 본 프로젝트는 퍼스널 트레이너들이 겪는 반복적이고 수동적인 업무 부담을 실질적으로 해소하고, 회원 관리의 효율성과 정밀도를 향상시키기 위한 *AI 기반 피트니스 관리 플랫폼, ‘채찍피티’*의 설계 및 구현을 중심으로 이루어졌다. 기존의 수기 중심 피드백 제공, 식단 검토, 일정 관리 등의 비효율적인 시스템에서 벗어나, 자동화된 리포트, 이미지 기반 식단 분석, 실시간 스케줄 매칭 기능 등을 통합함으로써 트레이너의 업무 환경을 획기적으로 개선하고자 하였다.<br><br>기능 측면에서, 역할 기반 사용자 관리, 운동 기록 및 리포트 자동화, 식단 분석, 스케줄 알림, 그리고 대시보드 기반 통합 관리 시스템까지 유기적으로 설계되어, 트레이너와 회원 간의 정보 흐름이 자연스럽고 명확하게 이어지도록 구현되었다. 이는 트레이너가 보다 전략적이고 맞춤화된 운동 및 식단 피드백을 제공할 수 있게 하며, 회원 역시 루틴을 정립하고 지속 가능하게 만들 수 있도록 돕는다.<br><br>기능적 평가에서도 높은 정확도와 사용자 만족도가 도출되었다. AI 리포트 기능은 ±8.7%의 낮은 오차 범위와 90% 이상의 시각적 이해도 응답률을 기록하며, 실제 트레이닝 환경에서도 적용 가능성을 입증하였다. 식단 분석 기능 역시 YOLO 기반 이미지 분석 기술을 활용하여 92.1% 이상의 탐지 정확도를 확보하였고, 트레이너가 설정한 식단과의 비교 분석을 통해 실질적인 피드백 기능을 수행할 수 있었다. 또한, 스케줄 알림 시스템은 97.6%의 시간 정확도와 사용자 90% 이상의 만족도를 얻으며, 실사용 환경에서도 높은 안정성을 보였다.<br><br>종합적으로 *‘채찍피티’*는 단순한 헬스케어 앱을 넘어서, 트레이너와 회원 간 상호작용의 중심에 위치하는 지능형 코치 시스템으로 발전할 가능성을 보여주었다. 향후에는 보다 정교한 모델 학습, 개인화 피드백 고도화, 건강 데이터와의 연동 등으로 확장하여, 운동뿐 아니라 전반적인 라이프스타일 코칭 플랫폼으로의 진화를 기대할 수 있다. 본 연구는 트레이너의 업무 구조를 기술적으로 혁신하고자 하는 시도이며, 실제 피트니스 산업의 디지털 전환을 가속화할 수 있는 기초 발판으로 의의가 있다.|
